@using ShikkhanobishMainWeb.Models
@using Flurl.Http
@using Microsoft.AspNetCore.Components;
@page "/{tID}"

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>MakeQuestion</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="Responsive bootstrap 4 admin template" name="description" />
    <meta content="Coderthemes" name="author" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link href="~/css/makeQues.css" />
</head>

<body>

    <!-- Begin page -->
    <!-- Start Page Content here -->
    <!-- ============================================================== -->



    <div class="content">

        <!-- Start container-fluid -->
        <div class="container-fluid">
            <!--row-->
            <div class="form-group row " >
                <div class="col-md-4">

                </div>
                <div class="col-md-4">
                    <h3 style="color:darkmagenta">Teacher QuestionHistory</h3>
                </div>
                <div class="col-md-4" style="text-align:right">
                    <h2 style="color:crimson;font-family:Garamond; ">TeacherName</h2>
                </div>
            </div>
            <br />
            <br />

            <div class="form-group row">
                <div class="card-box widget-inline offset-5">
                    <div class="text-center p-3">
                        <h2 class="mt-2"> <b>@countTQH</b></h2>
                        <p class="text-muted mb-0">
                            Total Uploaded

                        </p>
                    </div>
                </div>
            </div>
            <!--end row -->

        </div>
        <br />
        <div class="col-12 " style="text-align:right">

            <a href="MakeQuestion" class="btn btn-outline-info">
                <i class="fas fa-marker "></i>
                <span> Make Question </span>
            </a>
        </div>
        <br />
        
        <div class="row">

            <div class="col-md-12">
                <div class="card tqTable">
                    <div class="card-header">
                        <h5>TeacherQuestionHistory</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-area">
                            <!-- table-responsive -->
                            <div class="table-responsive">
                                <table class="table table-bordered">
                                    <thead>
                                        <tr>
                                            <th>tqID</th>
                                            <th>teacherID</th>
                                            <th>questionID</th>
                                            <th>Review</th>

                                        </tr>
                                    </thead>

                                    <tbody>
                                        @for (int i = 0; i < tqhList.Count; i++)
                                        {
                                            <tr>
                                                <td>@tqhList[i].tqID</td>
                                                <td>@tqhList[i].teacherID</td>
                                                <td>@tqhList[i].questionID</td>
                                                <td>@tqhList[i].review</td>

                                            </tr>

                                        }

                                    </tbody>



                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br />
        <br />
        <br />
        <!-- end container-fluid -->
        <!-- Footer Start -->
        <footer class="footer">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        2021 &copy; shikkhanobish
                    </div>
                </div>
            </div>
        </footer>
        <!-- end Footer -->
    </div>
    <!-- end content -->
    <!-- END wrapper -->
    <!-- Vendor js -->

</body>
</html>

@code{
    [Parameter]
    public string tID { get; set; }

    int countTQH;
    List<TeacherQuesHistory> tqhList = new List<TeacherQuesHistory>();

    protected override async Task OnInitializedAsync()
    {
        await GetTeacherQuestionHistory();
        await GetStudentCount();
    }

    public async Task GetTeacherQuestionHistory()
    {
        var thl = await "https://api.shikkhanobish.com/api/ShikkhanobishLogin/getTeacherQuestionHistory".GetJsonAsync<List<TeacherQuesHistory>>();

        for (int i= 0; i < thl.Count; i++)
        {
            if(thl[i].teacherID.ToString() == tID)
            {
                tqhList.Add(thl[i]);
            }
        }

    }

    public async Task GetStudentCount()
    {

        int count = 0;
        var list = await "https://api.shikkhanobish.com/api/ShikkhanobishLogin/getTeacherQuestionHistory".GetJsonAsync<List<TeacherQuesHistory>>();
        for(int i = 0; i < list.Count; i++)
        {
            if (tID == list[i].teacherID.ToString())
            {
                count++;

            }
            countTQH = count;
        }




    }



}

